<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Family</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .family-tree { display: flex; flex-direction: column; align-items: center; }
        .member { margin: 10px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
        .member img { width: 50px; height: 50px; border-radius: 50%; }
        .add-remove { margin-top: 20px; }
        .login { text-align: center; margin-top: 50px; }
        .profile { display: flex; flex-direction: column; align-items: center; }
        .profile input, .profile textarea { margin: 10px 0; }
        .homepage-button { margin-top: 20px; }
    </style>
</head>
<body>
    <div class="login">
        <h1>Welcome to My Family</h1>
        <form id="loginForm">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
            <button type="submit">Login</button>
        </form>
        <form id="viewFamilyForm" style="margin-top: 20px;">
            <label for="familyCode">Family Code:</label>
            <input type="text" id="familyCode" name="familyCode" required>
            <button type="submit">View Family</button>
        </form>
    </div>

    <div id="familyPage" style="display: none;">
        <h1>My Family</h1>
        <div class="family-tree" id="familyTree">
            <!-- Family members will be dynamically added here -->
        </div>
        <div class="add-remove">
            <button onclick="addMember()">Add Member</button>
            <button onclick="removeMember()">Remove Member</button>
        </div>
        <button class="homepage-button" onclick="showLoginPage()">Homepage</button>
    </div>

    <div id="profilePage" style="display: none;">
        <h1 id="profileName"></h1>
        <div class="profile">
            <h2>What's happening today?</h2>
            <textarea id="eventText" placeholder="Describe the event..."></textarea>
            <input type="file" id="photoUpload" accept="image/*">
            <input type="file" id="audioUpload" accept="audio/*">
            <button onclick="logEvent()">Log Event</button>
            <button class="homepage-button" onclick="showFamilyPage()">Homepage</button>
        </div>
        <div class="profile">
            <h2>Edit My Details</h2>
            <label for="birthDate">Birth Date:</label>
            <input type="date" id="birthDate">
            <button onclick="updateDetails()">Update</button>
        </div>
    </div>

    <script>
        const familyMembers = [
            { name: 'Allegria', birthDate: '2014-05-01', events: [], icon: 'ðŸ‘§' },
            { name: 'Elisha', birthDate: '2016-08-01', events: [], icon: 'ðŸ‘¦' },
            { name: 'Isabelle', birthDate: '2017-09-01', events: [], icon: 'ðŸ‘§' },
            { name: 'Rapha-Ella', birthDate: '2020-04-01', events: [], icon: 'ðŸ‘¶' },
            { name: 'Felix', birthDate: '2023-09-01', events: [], icon: 'ðŸ‘¶' }
        ];

        const ownerCredentials = {
            username: 'yourUsername',
            password: 'yourPassword'
        };

        function calculateAge(birthDate) {
            const birth = new Date(birthDate);
            const now = new Date();
            const ageInMonths = (now.getFullYear() - birth.getFullYear()) * 12 + (now.getMonth() - birth.getMonth());
            return ageInMonths < 12 ? `${ageInMonths} months` : `${Math.floor(ageInMonths / 12)} years`;
        }

        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            if (username === ownerCredentials.username && password === ownerCredentials.password) {
                document.querySelector('.login').style.display = 'none';
                document.getElementById('familyPage').style.display = 'block';
                loadFamilyTree(true);
            } else {
                alert('Invalid credentials');
            }
        });

        document.getElementById('viewFamilyForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const familyCode = document.getElementById('familyCode').value;
            if (familyCode === 'yourFamilyCode') {
                document.querySelector('.login').style.display = 'none';
                document.getElementById('familyPage').style.display = 'block';
                loadFamilyTree(false);
            } else {
                alert('Invalid family code');
            }
        });

        function loadFamilyTree(isOwner) {
            const familyTree = document.getElementById('familyTree');
            familyTree.innerHTML = '';
            familyMembers.sort((a, b) => new Date(b.birthDate) - new Date(a.birthDate)).forEach(member => {
                const memberDiv = document.createElement('div');
                memberDiv.className = 'member';
                memberDiv.innerHTML = `<img src="default-avatar.png" alt="${member.name}"><p>${member.icon} ${member.name}, ${calculateAge(member.birthDate)}</p>`;
                memberDiv.addEventListener('click', () => openProfile(member, isOwner));
                familyTree.appendChild(memberDiv);
            });
        }

        function addMember() {
            const name = prompt('Enter the name of the new member:');
            const birthDate = prompt('Enter the birth date of the new member (YYYY-MM-DD):');
            const icon = prompt('Enter an icon for the new member (e.g., ðŸ‘§, ðŸ‘¦, ðŸ‘¶):');
            if (name && birthDate && icon) {
                familyMembers.push({ name, birthDate, events: [], icon });
                loadFamilyTree(true);
            }
        }

        function removeMember() {
            const name = prompt('Enter the name of the member to remove:');
            const index = familyMembers.findIndex(member => member.name === name);
            if (index !== -1) {
                familyMembers.splice(index, 1);
                loadFamilyTree(true);
            } else {
                alert('Member not found');
            }
        }

        function openProfile(member, isOwner) {
            document.getElementById('familyPage').style.display = 'none';
            document.getElementById('profilePage').style.display = 'block';
            document.getElementById('profileName').innerText = member.name;
            if (!isOwner) {
                document.querySelectorAll('.profile')[1].style.display = 'none';
            }
        }

        function logEvent() {
            const eventText = document.getElementById('eventText').value;
            const photoUpload = document.getElementById('photoUpload').files[0];
            const audioUpload = document.getElementById('audioUpload').files[0];
            // Implement event logging logic here
            alert('Event logged: ' + eventText);
        }

        function updateDetails() {
            const name = document.getElementById('profileName').innerText;
            const birthDate = document.getElementById('birthDate').value;
            const member = familyMembers.find(member => member.name === name);
            if (member && birthDate) {
                member.birthDate = birthDate;
                alert('Details updated');
                loadFamilyTree(true);
            }
        }

        function showLoginPage() {
            document.getElementById('familyPage').style.display = 'none';
            document.querySelector('.login').style.display = 'block';
        }

        function showFamilyPage() {
            document.getElementById('profilePage').style.display = 'none';
            document.getElementById('familyPage').style.display = 'block';
        }
    </script>
</body>
</html>
